<!doctype html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="iso-8859-1">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Thomas Kosch">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
 <!-- Bootstrap CSS -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css" />
	<link rel="image_src" type="image/jpeg" href="img/bg.jpg" />
	<meta property="og:image" content="img/bg.jpg">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<meta property="og:site_name" content="Informed Consent">	
	<title>Informed Consent Generator</title>	
</head>
 <body class="transparent">
	<script src="js/countryList.js"></script>
	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script src="js/jquery-cookie-plugin/jquery.cookie.js"></script>
	<script src="js/jquery-validation/jquery.validate.js"></script>	 
	<script src="js/popper.min.js" ></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/seedrandom.min.js"></script> 
	<script src="js/html2pdf.bundle.min.js"></script> 
    
	<div id="mainFrame" class="vertical-center">
		<div id="demographicsPage" class="whiteBox container rounded">
			<form id="demographicsForm" class="form-horizontal" action="javascript:generate(this);">
				<div id="input">
                    <div class="row">
                        <div class="col mb-2 ">
                            <a href="https://www.dfki.de"><img src="img/DFKI_Logo.png" class="float-right mr-3" width="140px" alt="" style="padding-top: 20px"></a>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col">
                            <h3 id="demographicsTitle" class="display-6">Informed Consent Generator</h3>
                        </div>
                    </div>
                    <hr />
                    <div class="row mt-3">
                        <div class="col mb-1">
                            Use this generator to obtain an informed consent form. Print it for and let it sign by every participant.
                        </div>
                    </div>
                    <hr />
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="institutionText">Your Institution</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><select class="form-control" name="selectInstitution" required></select></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="researchText">Kind of research</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><select class="form-control" name="selectResearch" required></select></div>
                    </div>
                    
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="titleText">Title</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><input class="form-control" name="title" required></input></div>
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="compensationText">Compensation</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><select class="form-control" name="compensation" required></select></div>
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="recordingsText">Recorded Data</span></div>
						<div class="col ml-4">
							<div class="row">
								<div class="col"><input type="checkbox" class="form-check-input" name="recordDemographics" id="recordDemographics" checked required><label class="form-check-label" for="recordDemographics">Demographics</label><span class="text-danger">*</span></div>
								<div class="col"><input type="checkbox" class="form-check-input" name="recordAudio" id="recordAudio"><label class="form-check-label" for="recordAudio">Audio</label></div>
								<div class="col"><input type="checkbox" class="form-check-input" name="recordPhotos" id="recordPhotos"><label class="form-check-label" for="recordPhotos">Photos</label></div>
								<div class="col"><input type="checkbox" class="form-check-input" name="recordVideos" id="recordVideos"><label class="form-check-label" for="recordVideos">Videos</label></div> 
							</div> 	
							<div class="row">
								<div class="col"><input type="checkbox" class="form-check-input" name="recordMotion" id="recordMotion"><label class="form-check-label" for="recordMotion">Motion Tracking</label></div>
								<div class="col"><input type="checkbox" class="form-check-input" name="recordPhysio" id="recordAudio"><label class="form-check-label" for="recordPhysio">Physio. Sensing</label></div>
								<div class="col"><input type="checkbox" class="form-check-input" name="recordEye" id="recordEye"><label class="form-check-label" for="recordEye">Eye/Head Tracking</label></div>
								<div class="col"><input type="checkbox" class="form-check-input" name="recordScreen" id="recordScreen"><label class="form-check-label" for="recordScreen">Screen Recording</label></div>
							</div> 						
						</div> 						
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="dataPublicText">Do you make the raw data public?</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><select class="form-control" name="dataPublic" required></select></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="durationText">Estimated Study Duration</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><input class="form-control" name="duration" required></input></div>
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="durationText">Estimated Number of Participants</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><input class="form-control" name="participants" required></input></div>
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="purposeText">Purpose (one sentence)</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><input class="form-control" name="purpose" required></input></div>
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="goalText">Goal (one sentence)</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><input class="form-control" name="goal" required></input></div>
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="procedureText">Procedure (in 4-6 steps)</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><textarea rows="4" class="form-control" name="procedure" required></textarea></div>
                    </div> 
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="researchersNameText">Principal Investigator (PI)</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><input class="form-control" name="thePIname" required></input></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="researchersMail">Principal Investigator's E-Mail</span><span class="text-danger">*</span><br /></div>
                        <div class="col-8"><input class="form-control" name="thePIemail" required></input></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="PIText">Head of the Department (if not = PI)</span></div>
                        <div class="col-8"><input class="form-control" name="departmentHead"></input></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="studentName">Research Student Names(s)</span></div>
                        <div class="col-8"><input class="form-control" name="studentName"></input></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="studentEmail">Research Students E-Mail(s)</span></div>
                        <div class="col-8"><input class="form-control" name="studentEmail"></input></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="funding">Funding</span></div>
                        <div class="col-8"><input class="form-control" name="funding"></input></div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-4"><span id="ethicalComitteeText">Ethical Comittee</span></div>
                        <div class="col-8"><input class="form-control" name="ethicalComittee"></input></div>
                    </div>
                    </div>
                    <div class="row mt-2 mb-2 itemRow" id="fieldsrequired">
                        <div class="col" >
                            <span class="text-danger">* fields required</span> <br />
                        </div>
                    </div>
                    <div class="row mt-2 itemRow">
                        <div class="col" >
                            <button id="btnBack" class="btn btn-primary btn-md float-left" >Back</button>
							<a id="btnExample" class="btn btn-secondary btn-md float-left mr-3 " >Example</a> 
                            <button id="btnGenerate" class="btn btn-primary btn-md float-right" type="Submit" value="">Generate</button>
                            <button id="btnPrint" class="btn btn-primary btn-md float-right mr-3 " value="">Print</button>
                            <button id="btnSave" class="btn btn-primary btn-md float-right mr-3 " value="">Save as PDF</button>
                        </div>
                    </div>
				<div class="row mt-2 mb-2" id="results">
					
				</div>
				<div class="row mt-2 mb-2 itemRow" id="githublink">
					<div class="col" > 
						<a href="https://github.com/TKosch/informed-consent-generator">Source Code on Github</a>
					</div>
				</div>
			</form>
		</div>

		
	</div>

	
	<script>
	
		var debug = false;
		
		$(document).ready(function() { 
			fillSelect();
			$("#btnExample").click(function() {
				$("select[name='selectInstitution']").val("Frankfurt University of Applied Sciences");
				$("input[name='recordDemographics']").prop( "checked", true );
				$("input[name='recordPhotos']").prop( "checked", true );
				$("input[name='recordMotion']").prop( "checked", true );
				$("input[name='recordVideos']").prop( "checked", true );
				$("select[name='selectResearch']").val("user study");
				$("select[name='dataPublic']").val("anonymized");
				$("select[name='compensation']").val("one credit point");
				//$("select[name='recordings']").val("selected", true);
				$("input[name='title'] ").val("Fitts' Task in Virtual Reality using Avatar Hands");
				$("input[name='departmentHead']").val("Prof. Dr. Valentin Schwind");
				$("input[name='thePIname']").val("Prof. Dr. Valentin Schwind");
				$("input[name='thePIemail']").val("valentin.schwind@fb2.fra-uas.de");
				$("textarea[name='procedure']").val("1. You will get a virtual reality headset and will be introduced with virtual hands in the environment\n2. You will see a virtual questionnaire. Tap on the table with you index finger to fill out the questionnaire. \n3. In multiple rounds, you have to point at virtual circles highlighted in red. \n4. This procedure will repeat multiple times using different hand conditions. ");
				$("input[name='participants']").val("36");
				$("input[name='studentName']").val("Eva Musterfrau, Max Mustermann, and Erika Musterfrau");
				$("input[name='studentEmail']").val("eva.musterfrau@stud.fra-uas.de, max.mustermann@stud.fra-uas.de, erika.musterfrau@stud.fra-uas.de");
				$("input[name='ethicalComittee']").val("DFG/BMBF");
				$("input[name='funding']").val("BMBF KI@FRA-UAS");
				$("input[name='duration']").val("60 minutes");
				$("input[name='purpose']").val("The purpose of this research is to study human performance in a pointing task with different avatar hands in virtual reality. ");
				$("input[name='goal']").val("The goal of this research is to understand how visual signals of the own body are incorporated into the own body scheme. ");
			});
		}); 
		
        function fillSelect(){ 
            $("select[name='selectInstitution']").append(new Option('Please select', ""));
            $("select[name='selectInstitution']").append(new Option('DFKI', "DFKI"));
            $("select[name='selectInstitution']").append(new Option('University of Regensburg', "University of Regensburg"));
            $("select[name='selectInstitution']").append(new Option('University of Stuttgart', "University of Stuttgart"));
            $("select[name='selectInstitution']").append(new Option('Humboldt University of Berlin', "Humboldt University of Berlin"));

            $("select[name='selectResearch']").append(new Option('Please select', ""));
            $("select[name='selectResearch']").append(new Option('Online study (survey, apps, web studies, etc.)', "online study"));
            $("select[name='selectResearch']").append(new Option('User Study (lab study, UX study, VR, eye-tracking, etc.)', "user study"));
            $("select[name='selectResearch']").append(new Option('Field Study (outside the lab, in-situ, etc.)', "field study"));
            $("select[name='selectResearch']").append(new Option('Interview (focus groups, expert interviews, use cases, diaries, etc.)', "interview"));
            
            $("select[name='dataPublic']").append(new Option('Please select', ""));
            $("select[name='dataPublic']").append(new Option('Yes (not anonymized)', "yes"));
            $("select[name='dataPublic']").append(new Option('Yes (anonymized)', "anonymized"));
            $("select[name='dataPublic']").append(new Option('No', "no"));
            
            $("select[name='compensation']").append(new Option('Please select', ""));
            $("select[name='compensation']").append(new Option('None', "no compensation")); 
            $("select[name='compensation']").append(new Option('1 EUR', "1 EUR"));
            $("select[name='compensation']").append(new Option('5 EUR', "5 EUR"));
            $("select[name='compensation']").append(new Option('10 EUR', "10 EUR"));
            $("select[name='compensation']").append(new Option('15 EUR', "15 EUR"));
            $("select[name='compensation']").append(new Option('20 EUR', "20 EUR"));
            $("select[name='compensation']").append(new Option('one half credit point for the lecture', "half credit point"));
            $("select[name='compensation']").append(new Option('one credit point for the lecture (e.g., when you need 3 for the lecture)', "one credit point"));
			
            $("input[name='title'] ").attr("placeholder", "Your research title");
            $("input[name='ethicalComittee'] ").attr("placeholder","Your review board (keep empty if none)");
            $("input[name='departmentHead']").attr("placeholder", "When there is a prof above the prof....");
            $("input[name='thePIname']").attr("placeholder","The person, who said you should do the study (e.g. Prof. Dr. Valentin Schwind)");
            $("input[name='thePIemail']").attr("placeholder", "E-mail of the person, who said you should do the study");
            $("textarea[name='procedure']").attr("placeholder", "1. Participant takes a seat\n2. Participant conducts the study\n3. Participant is confused\n4. Participant leaves");
            $("input[name='participants']").attr("placeholder", "Insert number");
            $("input[name='studentName']").attr("placeholder","Eva Musterfrau, Max Mustermann, and Erika Musterfrau");
            $("input[name='studentEmail']").attr("placeholder","eva.musterfrau@stud.fra-uas.de, max.mustermann@stud.fra-uas.de, erika.musterfrau@stud.fra-uas.de");
            $("input[name='funding']").attr("placeholder","Your funding (keep empty if none)");
            $("input[name='duration']").attr("placeholder","60 minutes");
            $("input[name='purpose']").attr("placeholder","Explain the purpose of this research. ");
            $("input[name='goal']").attr("placeholder","Explain the goal of this research. ");
  
            $("#btnBack").hide();
            $("#btnPrint").hide(); 
			$("#btnSave").hide();
			
            $("#btnBack").click(function(e){ 
                $("#btnBack").hide();
                $("#btnPrint").hide();
                $("#btnSave").hide();
				$("#btnExample").show();
                $("#input").show(); 
                $("#fieldsrequired").show();
                $("#btnGenerate").show();
                $("#results").html("");
                e.preventDefault();   
            });
            
            $("#btnPrint").click(function(e){ 
                window.print(); 
                e.preventDefault(); 
            });
            
            $("#btnSave").click(function(e){
                const element = document.getElementById('printBody'); 
				document.body.scrollTop = 0; // For Safari
				document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
				html2pdf().set({ 
					margin: [1.4, 1.4, 1.4, 1.4] , // [top, left, bottom, right].
					filename: 'Informed Consent.pdf', 
					image: { type: 'jpeg', quality: 0.90 },
					html2canvas: { dpi: 75, letterRendering: true, useCORS: true, scale: 3 }, 
					pagebreak: { mode: ['avoid-all', 'css', 'legacy'], before: '#pageBreak' },
					jsPDF: { unit: 'cm', format: 'A4', orientation: 'portrait' } 
				}).from(element).save(); 
                e.preventDefault(); 
            });
		}
        
        function generate(){
            $("#btnGenerate").hide();
            $("#input").hide();
            $("#btnPrint").show();
            $("#btnBack").show(); 
            $("#btnSave").show(); 
			$("#fieldsrequired").hide();
			$("#btnExample").hide();
			$("#btnPrint").show();
			
            var article = "";
            var str = "";
			
			var researchType = $("select[name='selectResearch']").val();
			var researchTitle = $("input[name='title']").val();
			var departmentHead = $("input[name='departmentHead']").val();
			var thePIname = $("input[name='thePIname']").val();
			var thePIemail = $("input[name='thePIemail']").val()
			var institution = $("select[name='selectInstitution']").val();
			var studentName = $("input[name='studentName']").val();
			var studentEmail = $("input[name='studentEmail']").val();
			var recordDemographics = $("input[name='recordDemographics']").prop('checked');
			var recordPhotos = $("input[name='recordPhotos']").prop('checked');
			var recordVideos = $("input[name='recordVideos']").prop('checked');
			var recordAudio = $("input[name='recordAudio']").prop('checked');
			var recordMotion = $("input[name='recordMotion']").prop('checked');
			var recordEye = $("input[name='recordEye']").prop('checked');
			var recordPhysio = $("input[name='recordPhysio']").prop('checked');
			var recordScreen = $("input[name='recordScreen']").prop('checked');
			var compensation = $("select[name='compensation']").val();
			var ethicalComittee = $("input[name='ethicalComittee']").val();
			var funding = $("input[name='funding']").val();
			var dataPublic = $("select[name='dataPublic']").val();
			var participants = $("input[name='participants']").val();
			var purpose = $("input[name='purpose']").val();
			var duration = $("input[name='duration']").val();
			var goal = $("input[name='goal']").val();
			var procedure = $("textarea[name='procedure']").val()
			 
            switch(researchType){
                case "online study": article = " an "; break;
                case "user study": article = " a "; break;
                case "field study": article = " a "; break;
                case "interview": article = " an "; break;
            }
            
			switch(institution){
                case "University of Applied Sciences in Frankfurt": str += "<div class='row' id='firstItem'><div class='col'><p><img src='img/frankfurtlogo.png' class='float-right' width='125px' alt='Logo' /></p></a></div></div>"; break;
                case "University of Regensburg": str += "<div class='row' id='firstItem'><div class='col'><p><img src='img/regensburglogo.png' class='float-right' width='125px' alt='Logo' /></p></a></div></div>"; break;
                case "University of Stuttgart": str += "<div class='row' id='firstItem'><div class='col'><p><img src='img/stuttgartlogo.jpg' class='float-right' width='125px' alt='Logo' /></p></a></div></div>"; break;
                case "Humboldt University of Berlin": str += "<div class='row' id='firstItem'><div class='col'><p><img src='img/hu-berlin-logo.png' class='float-right' width='125px' alt='Logo' /></p></a></div></div>"; break;
            }
 
			// TITLE
            str += "<div class='pageBreak'><h1>Informed Consent of Participation</h1>"; 
            
			// INVITATION (SUMMARY OF THE FOLLOWING)
            str += "<p>You are invited to participate in the " + researchType + " <b>" + capital_letter(researchTitle) + "</b> initiated and conducted by " + studentName  + ". The research is supervised by " + thePIname + ". ";
            if( funding != ""){ 
                str += "This study is funded and financed by the research project " + funding + ". ";
            } 
			
			var records = "";
			 
			if(recordPhotos) records += "take photos, ";
			if(recordVideos) records += "record videos, ";
			if(recordAudio) records += "record audio, ";
			if(recordMotion) records += "record data of your body movements, ";
			if(recordEye) records += "record data of your eye movements, ";
			if(recordPhysio) records += "take physiological measurements of your body, ";
			if(recordScreen) records += "record the screen and/or activities on your device, ";
			records += " and take notes during the " + researchType;
              
			// BULLET POINT OVERVIEW AT THE BEGINNING
            str += "Please note:<ul>";
			str += "<li>Your participation is entirely voluntary and can be withdrawn at any time</li>";
			str += "<li>The " + researchType + " will last approximately " + duration + "</li>";
            
            if(recordDemographics) str += "<li>We will record personal demographics (age, gender, etc.)</li>";
            if(recordPhotos || recordVideos || recordVideos || recordAudio || recordMotion || recordEye || recordPhysio) 
				str += "<li>We will " + records + ". "; 
            if(recordScreen) str += "<li>We will record the screen and activities on your device that are necessary for the study</li>";
            
			str += "<li>All records and data will be subject to standard data use policies</li>";
			
            if(dataPublic == "anonymized") str += "<li>All records and subject-related data will be anonymized</li>";
			
            if(compensation == "one credit point"){
                str += "<li>You will receive one credit point for your study course as compensation</li>";
            } 
            
            if(compensation == "half credit point"){
                str += "<li>You will receive 1/2 credit point for your study course as compensation</li>";
            }
            str += "<li>Repeated participation in the study is not permitted</li>";
            str += "</ul>"; 
            str += "<p>The alternative to participation in this study is to choose not to participate. If you have any questions or complaints about the whole informed consent process of this research study or your rights as a human research subject, please contact ";
			
            if(ethicalComittee != ""){
                str += "our ethical committee office (" + ethicalComittee + ") and " + thePIname + " (E-Mail: " + thePIemail +"). ";
            } else {
                str += thePIname + " (E-Mail: " + thePIemail +")" + (departmentHead =="" ? "" : " and " + departmentHead + ". ");
            }
			
            str += "You should carefully read the information below. Please take the time you need to read the consent form.</p></div>";
            
            var sectionCount = 1;
			
            // GOAL AND PURPOSE
			
            str += "<div class='pageBreak'><h3>" + sectionCount + ". Purpose and Goal of this Research</h2>";
            str += "<p>" + purpose + " " + goal + " Your participation will help us achieve this goal. ";
            str += "The results of this research may be presented at scientific or professional meetings or published in scientific proceedings and journals. </p></div>";
            
			sectionCount++;
			
			// PARTICIPATION AND COMPENSATION
			
            str += "<div class='pageBreak'><h3>" + sectionCount + ". Participation and Compensation</h3>";
            str += "<p>Your participation in this " + researchType + " is completely voluntary. ";
			str += "You will be one of approximately " + participants + " people being ";
			
            switch(researchType){
                case "online study": str += "surveyed "; break;
                case "user study": str += "tested "; break;
                case "field study":  str += "surveyed "; break;
                case "interview":  str += "interviewed "; break;
            }
			str += "for this research. ";
            
			if(compensation != "no compensation"){
				if(compensation == "one credit point"){
					str += "You will receive a certificate of participation for one credit point required for your study course at the " + institution + ". You may withdraw and discontinue participation at any time without justification for withdrawing. You will still receive the extra one credit point that your professor had offered in exchange for your participation. If you decline to participate or withdraw from the " + researchType + ", no one on the campus will be told. ";
				} else if(compensation == "half credit point"){
					str += "You will receive a certificate of participation for 1/2 credit point required for your study course at the " + institution + ". You may withdraw and discontinue participation at any time without justification for withdrawing. You will still receive your 1/2 credit point that your professor had offered in exchange for your participation. If you decline to participate or withdraw from the " + researchType + ", no one on the campus will be told. ";
				} else {
					str += "You will receive " + compensation + " as compensation for your participation. You may withdraw and discontinue participation at any time without penalty or losing the compensation. If you decline to participate or withdraw from the " + researchType + ", no one on the campus will be told. ";
				}
			} else {
				str += "You will receive no compensation for your participation. You may withdraw and discontinue participation at any time without penalty. If you decline to participate or withdraw from the " + researchType + ", no one on the campus will be told. You can still demand a certificate of participation. ";
			}
                
            if(researchType == "interview" || (recordVideos || recordAudio))    
                str += "You can deny answering questions if you feel uncomfortable in any way. ";
                         
            if(researchType == "user study")    
                str += "The investigator may withdraw you from this research if continued participation will not meet the study goals or affect your well-being. ";
                 
            sectionCount++;
			
			// PROCEDURE
			
            str += "</p></div><div class='pageBreak'><h3>" + sectionCount + ". Procedure</h3>";
            str += "<p>After confirming the informed consent the procedure is as follows:</p><div class='mt-2 mb-2' style='padding-left: 10px; padding-top: 0px'><p>" + procedure.replace(/\n/g, "<br />")+"</p></div><p>The complete procedure of this " + researchType + " will last approximately " + duration + ".</p>";
            str += "</div>";
			
            sectionCount++;
			
			// RISKS AND BENEFITS 
			
            str += "<div class='pageBreak'><h3>" + sectionCount + ". Risks and Benefits</h3>";
            str += "<p>There are no risks associated with this " + researchType + ". Discomforts or inconveniences will be minor and are not likely to happen. If any discomforts become a problem, you may discontinue your participation. ";
            
			if(researchType != "online study"){
                str += "In order to minimize any risk of infection, hygiene regulations of the " + institution + " apply and must be followed. Any violations of the hygiene regulations or house rules of this institution can mean immediate termination of the study. If you get injured as a direct result of participation in this research, please reach out to the principal investigator. Enrolled students are automatically insured against the consequences of accidents through statutory accident insurance and with private liability insurance in case of any damages. ";
            } 
			
            if(compensation == "no compensation") 
                str += "You will not directly benefit through participation in this " + researchType +". We hope that the information obtained from your participation may help to bring forward the research in this field. ";
				
            if(compensation == "one credit point" || compensation == "half credit point")     
                str += "Students benefit from participating with a compensation of " + compensation + ". ";
 
            str += "The confirmation of participation in this study can be obtained directly from the researchers.</p></div>";
			
            sectionCount++;
			
            // DATA PROTECTION
			str += "<div class='pageBreak'><h3>" + sectionCount + ". Data Protection and Confidentiality</h3>";
            str += "<p>We are planning to publish our results from this and other sessions in scientific articles or other media. ";
			
			if(dataPublic != "yes") 
				str += "These publications will neither include your name nor cannot be associated with your identity. ";
			
            if(recordDemographics) 
				str += "Any demographic information will be published anonymized and in aggregated form. ";
			
			if(researchType != "online study"){
                str += "Contact details (such as e-mails) can be used to track potential infection chains or to send you further details about the research. Your contact details will not be passed on to other third parties. ";
            } else {
				str += "Contact details (such as e-mails) can be used to send you further details about the research. Your contact details will not be passed on to other third parties. ";
			}
			
			if(dataPublic != "yes") 
				str += "Any data or information obtained in this "+ researchType + " will be treated confidentially, will be saved encrypted, and cannot be viewed by anyone outside this research project unless we have you sign a separate permission form allowing us to use them. " ;
            
            str += "All data you provide in this " + researchType + " will be subject of the General Data Protection Regulation (GDPR) of the European Union (EU) and treated in compliance with the GDPR. ";
                        
            if(dataPublic == "yes")
                str += "Subsequent uses of records and data will be subject to standard data use policies. ";
                        
            if(dataPublic == "anonymized") {
                str += "Subsequent uses of records and data will be subject to standard data use policies, which protect the full anonymity of the participating individuals. ";
				
				if(recordPhotos || recordVideos)
					str += "Before publication, image material indicating your identity will be anonymized e.g., by blurring or pixelating faces. ";
			}
			 
            str += "Faculty and administrators from the campus will not have access to raw data or transcripts. This precaution will prevent your individual comments from having any negative repercussions. ";
            
            if(researchType == "interview" || (recordVideos || recordAudio)) {
				str += "Access to the raw interview transcript and transcribed observation protocol will be limited to the authors of this research, academic colleagues, and researchers with whom he might collaborate as part of the research process. Any interview content or direct quotations from the interview, that are made available through academic publications or other academic outlets will be anonymized so that you cannot be identified. ";
            }    
			
            if(researchType == "online study"){
                str+= "Any assessments or direct quotations from your textual feedback, that are made available through academic publications or other academic outlets will be anonymized so that you cannot be identified. This site uses cookies and other tracking technologies to conduct the research, to improve the user experience, the ability to interact with the system and to provide additional content from third parties. Despite careful control of content, the researchers assume no liability for damages, which directly or indirectly result from the use of this online application. ";
			} else {
				str += "During the study, we log experimental data, " + records + ". ";
			}
			  
            if(dataPublic != "yes") { 
				str += "Raw data and material will be retained securely and compliance with the GDPR, for no longer than ";
				if(funding != "") 
					str += "required by the funding organization (10 years) ";
				else
					str += "necessary ";
					
				str += " or if you contact the researchers to destroy or delete them immediately. ";
			}  
			
            str += "As with any publication or online-related activity, the risk of a breach of confidentiality or anonymity is always possible. According to the GDPR, the researchers will inform the participant if a breach of confidential data was detected. ";
			
            str += "</p></div>";
            
            sectionCount++;
            // IDENTIFICATION OF INVESTIGATORS
			
            str += "<div class='pageBreak'><h3>" + sectionCount + ". Identification of Investigators</h3>";
			
			var street = "";
			var zip = "";
			var city = "";
			var country = "";
			
			switch(institution){
                case "Frankfurt University of Applied Sciences": 
					street = "Nibelungenplatz 1";
					zip = "60318";
					city = "Frankfurt a. M.";
					country = "Germany";
				break;
                case "University of Regensburg": 
					street = "Universit�tsstra�e 31";
					zip = "93053";
					city = "Regensburg";
					country = "Germany";
				break;
				case "University of Stuttgart": 
					street = "Pfaffenwaldring 5a";
					zip = "70569";
					city = "Stuttgart";
					country = "Germany";
				break;
                case "Humboldt University of Berlin": 
					street = "Rudower Chaussee 25";
					zip = "12489";
					city = "Berlin";
					country = "Germany";
				break;
            }
			
			str += "<p>If you have any questions or concerns about the research, please feel free to contact: </p><div class='row mt-2 mb-2'>";
			
			if(studentName != ""){
				str += "<div class='col-5 ml-1 '><p> " + studentName + "<br />" + (studentName.split(",").length == 1 ? (studentName.split("and").length == 1 ? "Student Researcher" : "Student Researchers") : "Student Researchers") + "<br />" + studentEmail + "</p></div>";
			}
			
			if(thePIname != ""){
				str += "<div class='col-4'><p> " + thePIname + "<br />Principal Investigator<br />" + street + "<br />" + zip + " " + city + ", " + country + "<br />" + thePIemail + "</p></div>";
			}
			
			if(departmentHead != "" && departmentHead != thePIname){
				str += "<div class='col-3'><p> " + departmentHead + "<br />Head of Department<br />" + street + "<br />" + zip + " " + city + ", " + country + "</p></div>";
			}
			
            str += "<br /></div></div>";
			
            sectionCount++;
			
            // INFORMED CONSENT
			
			if( researchType != "online study"){
				str += "<div class='pageBreak'><h3>" + sectionCount + ". Informed Consent and Agreement</h3>";
				str += "<p>This consent form will be retained securely and in compliance with the GDPR for no longer than necessary.</p><p class='mt-2'><table class='mb-2'>";
								 
				str += "<tr><th><img src='img/square.jpg' width='15px'  height='15px'/></th><th><p class='mb-2'>I understand the explanation provided to me. I understand und will follow the hygiene rules of the institution. I understand that this declaration of consent is revocable at any time. I have been given a copy of this form. I have had all my questions answered to my satisfaction, and I voluntarily agree to participate in this " + researchType +".</p></th></tr>";
				 
				var anonymityStr = ((dataPublic == "anonymized") ? " anonymized" : "");
				
				str += "<tr><th><img src='img/square.jpg' width='15px' height='15px'/></th><th><p class='mb-2'>I agree that the researchers will " + records.replaceAll("your", "my") + ". I understand that all data will be treated confidentially and in compliance with the GDPR. "
				
				if(dataPublic != "yes") { 
					str += "I understand that the material will be anonymized and cannot be associated with my name. I understand that full anonymity cannot be guaranteed and a breach of confidentiality is always possible. ";
				} else {
					str += "I understand that the material may allow conclusions to be drawn about my identity. ";
				} //
				
				str += "From the consent of publication, I cannot derive any rights (such as any explicit acknowledgment, financial benefit, or co-authorship). ";
				
				str += "I understand that the material can be published worldwide and may be the subject of a press release linked to social media or other promotional activities. Before publication, I can revoke my consent at any time. Once the material has been committed to publication it will not be possible to revoke the consent. ";
				
				str += "</p></th></tr>";
				
				//var anonymityStr = ((dataPublic == "anonymized") ? " anonymously" : "");
				 
				str += "</table></p>"   
				str += "<table class='mt-2'>"
				str += "<tr><th><br /><br />____________________________________________</th><th></th></tr>"
				str += "<tr><th>Printed Name of Subject</th><th></th></tr>"
				str += "<tr><th><br /><br />____________________________________________</th><th><br /><br />____________________________________________</th></tr>"
				str += "<tr><th>Signature of Subject</th><th>Location, Date</th></tr>"
				str += "</table>"
				str += "</div>";
			}
			
            $("#results").html("<div class='frameStyle'><div id='printBody'>" + str + "</div></div>");
             
		}
         
		function capital_letter(str) {
            str = str.split(" ");
            for (var i = 0, x = str.length; i < x; i++) {
                str[i] = str[i][0].toUpperCase() + str[i].substr(1);
            }
            return str.join(" ");
        }
		
	</script>
 </body>
</html>